---
import Layout from "@/layouts/Layout.astro";
import { fetchBlogs } from "@/lib/microcms/fetchBlogs"

export const getStaticPaths = async () => {
	const blogsResponse = await fetchBlogs({ fields: ["id"] });
	return blogsResponse.contents.map((blog) => ({
		params: {
			blogId: blog.id,
		},
	}));
};

const { blogId } = Astro.params;
const blogsResponse = await fetchBlogs({ ids: blogId });
const blog = blogsResponse.contents[0];
---

<Layout>
	<div class="prose mx-auto">
		<h1>{ blog.title }</h1>
		<div set:html={blog.content}>
	</div>
</Layout>
